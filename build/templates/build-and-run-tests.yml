steps:
  - task: Npm@1
    displayName: 'Install dependencies with package-lock.json'
    inputs:
      command: custom
      verbose: true
      customCommand: |
        ci

  - task: Npm@1
    displayName: 'Compile sources'
    inputs:
      command: custom
      verbose: true
      customCommand: |
        run buildOnce

  - script: |
      node node_modules/vscode/bin/test
    displayName: 'Run tests'
